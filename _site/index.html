<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Valet Linux</title>
    <meta name="description" content="A fork of Laravel Valet to work in Linux."/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=9794033ea097ef68cd246dd326f5e82dc9532d54">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Valet Linux</h1>
      <h2 class="project-tagline">A fork of Laravel Valet to work in Linux.</h2>
      
        <a href="http://github.com/cpriego/valet-linux" class="btn">View on GitHub</a>
      
      
    </section>

    <section class="main-content">
      <h1><img src="https://cdn.rawgit.com/wiki/cpriego/valet-linux/images/valet.svg" /></h1>
<ul>
  <li><a href="#introduction">Introduction</a>
    <ul>
      <li><a href="#valet-or-homestead">Valet Or Homestead</a></li>
    </ul>
  </li>
  <li><a href="#installation">Installation</a>
    <ul>
      <li><a href="#upgrading">Upgrading</a></li>
    </ul>
  </li>
  <li><a href="#serving-sites">Serving Sites</a>
    <ul>
      <li><a href="#the-park-command">The “Park” Command</a></li>
      <li><a href="#the-link-command">The “Link” Command</a></li>
      <li><a href="#securing-sites">Securing Sites With TLS</a></li>
    </ul>
  </li>
  <li><a href="#sharing-sites">Sharing Sites</a></li>
  <li><a href="#custom-valet-drivers">Custom Valet Drivers</a>
    <ul>
      <li><a href="#local-drivers">Local Drivers</a></li>
    </ul>
  </li>
  <li><a href="#other-valet-commands">Other Valet Commands</a></li>
  <li><a href="requirements">Requirements</a></li>
  <li><a href="faq">F.A.Q.</a></li>
</ul>

<h4 id="warning">WARNING</h4>
<p>Please <strong>do not, under any circumstance, install valet with</strong> root <strong>or the</strong> <code class="highlighter-rouge">sudo</code> <strong>command</strong>. Kittens could die.</p>

<h2 id="introduction"><a name="introduction">Introduction</a></h2>

<p>Valet <em>Linux</em> is a Laravel development environment for Linux minimalists. No Vagrant, no <code class="highlighter-rouge">/etc/hosts</code> file. You can even share your sites publicly using local tunnels. <em>Yeah, we like it too.</em></p>

<p>Valet <em>Linux</em> configures your system to always run Nginx in the background when your machine starts. Then, using <a href="https://en.wikipedia.org/wiki/Dnsmasq">DnsMasq</a>, Valet proxies all requests on the <code class="highlighter-rouge">*.dev</code> domain to point to sites installed on your local machine.</p>

<p>In other words, a blazing fast Laravel development environment that uses roughly 7mb of RAM. Valet <em>Linux</em> isn’t a complete replacement for Vagrant or Homestead, but provides a great alternative if you want flexible basics, prefer extreme speed, or are working on a machine with a limited amount of RAM.</p>

<p>Out of the box, Valet support includes, but is not limited to:</p>

<ul>
  <li><a href="https://laravel.com">Laravel</a></li>
  <li><a href="https://lumen.laravel.com">Lumen</a></li>
  <li><a href="https://symfony.com">Symfony</a></li>
  <li><a href="https://framework.zend.com">Zend</a></li>
  <li><a href="https://cakephp.org">CakePHP 3</a></li>
  <li><a href="https://wordpress.org">WordPress</a></li>
  <li><a href="https://roots.io/bedrock/">Bedrock</a></li>
  <li><a href="https://craftcms.com">Craft</a></li>
  <li><a href="https://statamic.com">Statamic</a></li>
  <li><a href="http://jigsaw.tighten.co">Jigsaw</a></li>
  <li>Static HTML</li>
</ul>

<p>However, you may extend Valet with your own <a href="https://laravel.com/docs/5.4/valet#custom-valet-drivers">custom drivers</a>.</p>

<p><a name="valet-or-homestead"></a></p>
<h3 id="valet-or-homestead">Valet Or Homestead</h3>

<p>As you may know, Laravel offers <a href="https://laravel.com/docs/5.4/homestead">Homestead</a>, another local Laravel development environment. Homestead and Valet differ in regards to their intended audience and their approach to local development. Homestead offers an entire Ubuntu virtual machine with automated Nginx configuration. Homestead is a wonderful choice if you want a fully virtualized Linux development environment or are on Windows.</p>

<p>Valet <em>Linux</em> requires you to install PHP and a database server directly onto your local machine. This is easily achieved by using your package manager. Valet provides a blazing fast local development environment with minimal resource consumption, so it’s great for developers who only require PHP / MySQL and do not need a fully virtualized development environment.</p>

<p>Both Valet and Homestead are great choices for configuring your Laravel development environment. Which one you choose will depend on your personal taste and your team’s needs.</p>

<h2 id="installation"><a name="installation">Installation</a></h2>

<ul>
  <li>Install Valet with Composer via <code class="highlighter-rouge">composer global require cpriego/valet-linux</code>.</li>
  <li>Run the <code class="highlighter-rouge">valet install</code> command. This will configure and install Valet and DnsMasq, and register Valet’s daemon to launch when your system starts.</li>
</ul>

<p>Once Valet is installed, try pinging any <code class="highlighter-rouge">*.dev</code> domain on your terminal using a command such as <code class="highlighter-rouge">ping foobar.dev</code>. If Valet is installed correctly you should see this domain responding on <code class="highlighter-rouge">127.0.0.1</code>.</p>

<p>Valet will automatically start its daemon each time your machine boots. There is no need to run <code class="highlighter-rouge">valet start</code> or <code class="highlighter-rouge">valet install</code> ever again once the initial Valet installation is complete.</p>

<blockquote>
  <p>Valet <em>Linux</em> is installed as a <code class="highlighter-rouge">composer</code> global package. You need to have composer installed in your system and ideally have the composer global tools added to your <code class="highlighter-rouge">PATH</code>.</p>
</blockquote>

<blockquote>
  <p>Before installation, you should review your system specific <a href="requirements">requirements</a> and make sure that no other programs such as Apache or Nginx are binding to your local machine’s port 80.</p>
</blockquote>

<blockquote>
  <p>Please remember to check the <a href="faq">F.A.Q.</a> for common questions or errors before posting an issue.</p>
</blockquote>

<h4 id="using-another-domain">Using Another Domain</h4>

<p>By default, Valet serves your projects using the <code class="highlighter-rouge">.dev</code> TLD. If you’d like to use another domain, you can do so using the <code class="highlighter-rouge">valet domain tld-name</code> command.</p>

<p>For example, if you’d like to use <code class="highlighter-rouge">.app</code> instead of <code class="highlighter-rouge">.dev</code>, run <code class="highlighter-rouge">valet domain app</code> and Valet will start serving your projects at <code class="highlighter-rouge">*.app</code> automatically.</p>

<p><a name="upgrading"></a></p>
<h3 id="upgrading">Upgrading</h3>

<p>You may update your Valet installation using the <code class="highlighter-rouge">composer global update</code> command in your terminal. After upgrading, it is good practice to run the <code class="highlighter-rouge">valet install</code> command so Valet can make additional upgrades to your configuration files if necessary.</p>

<h2 id="serving-sites"><a name="serving-sites">Serving Sites</a></h2>

<p>Once Valet is installed, you’re ready to start serving sites. Valet provides two commands to help you serve your Laravel sites: <code class="highlighter-rouge">park</code> and <code class="highlighter-rouge">link</code>.</p>

<p><a name="the-park-command"></a>
<strong>The <code class="highlighter-rouge">park</code> Command</strong></p>

<ul>
  <li>Create a new directory on your machine by running something like <code class="highlighter-rouge">mkdir ~/Sites</code>. Next, <code class="highlighter-rouge">cd ~/Sites</code> and run <code class="highlighter-rouge">valet park</code>. This command will register your current working directory as a path that Valet should search for sites.</li>
  <li>Next, create a new Laravel site within this directory: <code class="highlighter-rouge">laravel new blog</code>.</li>
  <li>Open <code class="highlighter-rouge">http://blog.dev</code> in your browser.</li>
</ul>

<p><strong>That’s all there is to it.</strong> Now, any Laravel project you create within your “parked” directory will automatically be served using the <code class="highlighter-rouge">http://folder-name.dev</code> convention.</p>

<p><a name="the-link-command"></a>
<strong>The <code class="highlighter-rouge">link</code> Command</strong></p>

<p>The <code class="highlighter-rouge">link</code> command may also be used to serve your Laravel sites. This command is useful if you want to serve a single site in a directory and not the entire directory.</p>

<ul>
  <li>To use the command, navigate to one of your projects and run <code class="highlighter-rouge">valet link app-name</code> in your terminal. Valet will create a symbolic link in <code class="highlighter-rouge">~/.valet/Sites</code> which points to your current working directory.</li>
  <li>After running the <code class="highlighter-rouge">link</code> command, you can access the site in your browser at <code class="highlighter-rouge">http://app-name.dev</code>.</li>
</ul>

<p>To see a listing of all of your linked directories, run the <code class="highlighter-rouge">valet links</code> command. You may use <code class="highlighter-rouge">valet unlink app-name</code> to destroy the symbolic link.</p>

<blockquote class="tip">
  <p>You can use <code class="highlighter-rouge">valet link</code> to serve the same project from multiple (sub)domains. To add a subdomain or another domain to your project run <code class="highlighter-rouge">valet link subdomain.app-name</code> from the project folder.</p>
</blockquote>

<p><a name="changing-tld"></a>
<strong>Changing domain TLD</strong></p>

<p>After installation all valet sites are assigned the <code class="highlighter-rouge">.dev</code> TLD, so if you have a folder named <code class="highlighter-rouge">foo</code> it will have the <code class="highlighter-rouge">foo.dev</code> URL.</p>

<p>If you would like to change the TLD for all your valet sites use the <code class="highlighter-rouge">domain</code> command.</p>

<p>To change the domain TLD to <code class="highlighter-rouge">.app</code> simply run:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>valet domain .app
</code></pre>
</div>

<p>To see current TLD assigned just run the command without options:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>valet domain
</code></pre>
</div>

<p><a name="changing-port"></a>
<strong>Changing Valet’s Nginx port</strong></p>

<p>Valet, by default, binds Nginx to port <code class="highlighter-rouge">80</code>. That’s rarely a problem for that port is usually free. But, if you installed another Web server (like Apache) prior Valet, chances are that port is no longer available.</p>

<p>If that’s the case you can use the <code class="highlighter-rouge">port</code> command.</p>

<p>To change Valet’s Nginx port to <code class="highlighter-rouge">8888</code> run:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>valet port 8888
</code></pre>
</div>

<p>To see the configured port run:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>valet port
</code></pre>
</div>

<p><a name="securing-sites"></a>
<strong>Securing Sites With TLS</strong></p>

<p>By default, Valet serves sites over plain HTTP. However, if you would like to serve a site over encrypted TLS using HTTP/2, use the <code class="highlighter-rouge">secure</code> command. For example, if your site is being served by Valet on the <code class="highlighter-rouge">laravel.dev</code> domain, you should run the following command to secure it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>valet secure laravel
</code></pre>
</div>

<p>To “unsecure” a site and revert back to serving its traffic over plain HTTP, use the <code class="highlighter-rouge">unsecure</code> command. Like the <code class="highlighter-rouge">secure</code> command, this command accepts the host name that you wish to unsecure:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>valet unsecure laravel
</code></pre>
</div>

<h2 id="sharing-sites"><a name="sharing-sites">Sharing Sites</a></h2>

<p>Valet even includes a command to share your local sites with the world. No additional software installation is required once Valet is installed.</p>

<p>To share a site, navigate to the site’s directory in your terminal and run the <code class="highlighter-rouge">valet share</code> command. A publicly accessible URL will be inserted into your clipboard and is ready to paste directly into your browser. That’s it.</p>

<p>To stop sharing your site, hit <code class="highlighter-rouge">Control + C</code> to cancel the process.</p>

<blockquote>
  <p><code class="highlighter-rouge">valet share</code> does not currently support sharing sites that have been secured using the <code class="highlighter-rouge">valet secure</code> command.</p>
</blockquote>

<h2 id="custom-valet-drivers"><a name="custom-valet-drivers">Custom Valet Drivers</a></h2>

<p>You can write your own Valet “driver” to serve PHP applications running on another framework or CMS that is not natively supported by Valet. When you install Valet, a <code class="highlighter-rouge">~/.valet/Drivers</code> directory is created which contains a <code class="highlighter-rouge">SampleValetDriver.php</code> file. This file contains a sample driver implementation to demonstrate how to write a custom driver. Writing a driver only requires you to implement three methods: <code class="highlighter-rouge">serves</code>, <code class="highlighter-rouge">isStaticFile</code>, and <code class="highlighter-rouge">frontControllerPath</code>.</p>

<p>All three methods receive the <code class="language-php highlighter-rouge">$sitePath</code>, <code class="language-php highlighter-rouge">$siteName</code>, and <code class="language-php highlighter-rouge">$uri</code> values as their arguments. The <code class="language-php highlighter-rouge">$sitePath</code> is the fully qualified path to the site being served on your machine, such as <code class="highlighter-rouge">/Users/Lisa/Sites/my-project</code>. The <code class="language-php highlighter-rouge">$siteName</code> is the “host” / “site name” portion of the domain (<code class="highlighter-rouge">my-project</code>). The <code class="language-php highlighter-rouge">$uri</code> is the incoming request URI (<code class="highlighter-rouge">/foo/bar</code>).</p>

<p>Once you have completed your custom Valet driver, place it in the <code class="highlighter-rouge">~/.valet/Drivers</code> directory using the <code class="highlighter-rouge">FrameworkValetDriver.php</code> naming convention. For example, if you are writing a custom valet driver for WordPress, your file name should be <code class="highlighter-rouge">WordPressValetDriver.php</code>.</p>

<p>Let’s take a look at a sample implementation of each method your custom Valet driver should implement.</p>

<h4 id="the-serves-method">The <code class="highlighter-rouge">serves</code> Method</h4>

<p>The <code class="highlighter-rouge">serves</code> method should return <code class="highlighter-rouge">true</code> if your driver should handle the incoming request. Otherwise, the method should return <code class="highlighter-rouge">false</code>. So, within this method you should attempt to determine if the given <code class="language-php highlighter-rouge">$sitePath</code> contains a project of the type you are trying to serve.</p>

<p>For example, let’s pretend we are writing a <code class="highlighter-rouge">WordPressValetDriver</code>. Our serve method might look something like this:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>    <span class="sd">/**
     * Determine if the driver serves the request.
     *
     * @param  string  $sitePath
     * @param  string  $siteName
     * @param  string  $uri
     * @return bool
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">serves</span><span class="p">(</span><span class="nv">$sitePath</span><span class="p">,</span> <span class="nv">$siteName</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">is_dir</span><span class="p">(</span><span class="nv">$sitePath</span><span class="o">.</span><span class="s1">'/wp-admin'</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre>
</div>

<h4 id="the-isstaticfile-method">The <code class="highlighter-rouge">isStaticFile</code> Method</h4>

<p>The <code class="highlighter-rouge">isStaticFile</code> should determine if the incoming request is for a file that is “static”, such as an image or a stylesheet. If the file is static, the method should return the fully qualified path to the static file on disk. If the incoming request is not for a static file, the method should return <code class="highlighter-rouge">false</code>:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>    <span class="sd">/**
     * Determine if the incoming request is for a static file.
     *
     * @param  string  $sitePath
     * @param  string  $siteName
     * @param  string  $uri
     * @return string|false
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">isStaticFile</span><span class="p">(</span><span class="nv">$sitePath</span><span class="p">,</span> <span class="nv">$siteName</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$staticFilePath</span> <span class="o">=</span> <span class="nv">$sitePath</span><span class="o">.</span><span class="s1">'/public/'</span><span class="o">.</span><span class="nv">$uri</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$staticFilePath</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre>
</div>

<blockquote>
  <p>The <code class="highlighter-rouge">isStaticFile</code> method will only be called if the <code class="highlighter-rouge">serves</code> method returns <code class="highlighter-rouge">true</code> for the incoming request and the request URI is not <code class="highlighter-rouge">/</code>.</p>
</blockquote>

<h4 id="the-frontcontrollerpath-method">The <code class="highlighter-rouge">frontControllerPath</code> Method</h4>

<p>The <code class="highlighter-rouge">frontControllerPath</code> method should return the fully qualified path to your application’s “front controller”, which is typically your “index.php” file or equivalent:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>    <span class="sd">/**
     * Get the fully resolved path to the application's front controller.
     *
     * @param  string  $sitePath
     * @param  string  $siteName
     * @param  string  $uri
     * @return string
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">frontControllerPath</span><span class="p">(</span><span class="nv">$sitePath</span><span class="p">,</span> <span class="nv">$siteName</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$sitePath</span><span class="o">.</span><span class="s1">'/public/index.php'</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre>
</div>

<p><a name="local-drivers"></a></p>
<h3 id="local-drivers">Local Drivers</h3>

<p>If you would like to define a custom Valet driver for a single application, create a <code class="highlighter-rouge">LocalValetDriver.php</code> in the application’s root directory. Your custom driver may extend the base <code class="highlighter-rouge">ValetDriver</code> class or extend an existing application specific driver such as the <code class="highlighter-rouge">LaravelValetDriver</code>:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>    <span class="k">class</span> <span class="nc">LocalValetDriver</span> <span class="k">extends</span> <span class="nx">LaravelValetDriver</span>
    <span class="p">{</span>
        <span class="sd">/**
         * Determine if the driver serves the request.
         *
         * @param  string  $sitePath
         * @param  string  $siteName
         * @param  string  $uri
         * @return bool
         */</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">serves</span><span class="p">(</span><span class="nv">$sitePath</span><span class="p">,</span> <span class="nv">$siteName</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="sd">/**
         * Get the fully resolved path to the application's front controller.
         *
         * @param  string  $sitePath
         * @param  string  $siteName
         * @param  string  $uri
         * @return string
         */</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">frontControllerPath</span><span class="p">(</span><span class="nv">$sitePath</span><span class="p">,</span> <span class="nv">$siteName</span><span class="p">,</span> <span class="nv">$uri</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$sitePath</span><span class="o">.</span><span class="s1">'/public_html/index.php'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
</div>

<h2 id="other-valet-commands"><a name="other-valet-commands">Other Valet Commands</a></h2>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">valet forget</code></td>
      <td>Remove a “parked” directory from the list.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet paths</code></td>
      <td>View all of your “parked” paths.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet restart</code></td>
      <td>Restart the Valet services.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet start</code></td>
      <td>Start the Valet services.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet stop</code></td>
      <td>Stop the Valet services.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet status</code></td>
      <td>View Valet services status.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">valet uninstall</code></td>
      <td>Uninstall the Valet services entirely.</td>
    </tr>
  </tbody>
</table>



      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="http://github.com/cpriego/valet-linux">valet-linux</a> is maintained by <a href="http://github.com/cpriego">cpriego</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>
